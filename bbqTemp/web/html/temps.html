<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>BBQ Temp - Temperature charts</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="BBQ Temp - BBQ grill temperature controller">
        <meta name="author" content="MjP">


        <link href="js/bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="js/bootstrap/css/footer.css" rel="stylesheet">
        <link class="include" rel="stylesheet" type="text/css" href="js/jquery.jqplot.min.css" />
        <link href="js/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="../assets/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
        <link rel="shortcut icon" href="../assets/ico/favicon.png">
    </head>

    <body>
        <div id="wrap">
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container">
                        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="brand" href="#">BBQ Temp</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li class="active"><a href="index.html">Home</a></li>

                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Charts<b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="temps.html">Hourly Charts</a></li>
                                        <li><a href="temps-live.html">Live Charts</a></li>

                                    </ul>
                                </li>
                                <li><a href="settings.html">Settings</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>

            <div class="container">

                <h1>Temperature charts</h1>



                <div id="chart" style="height:400px; width:1220px;"></div>

                <button class="btn btn-primary btn-small" id="button1hData">1h data</button>
                <button class="btn btn-primary btn-small" id="button2hData">2h data</button>
                <button class="btn btn-primary btn-small" id="button4hData">4h data</button>
                <button class="btn btn-primary btn-small" id="button8hData">8h data</button>
                <button class="btn btn-primary btn-small" id="button12hData">12h data</button>
                <button class="btn btn-primary btn-small" id="button24hData">24h data</button>
                <button class="btn btn-primary btn-small" id="buttonRefresh"><i class="icon-white icon-refresh"></i> Refresh</button>
            </div> <!-- /container -->
            <div id="push"></div>
        </div>
        <div id="footer">
            <div class="container">
                <p class="muted credit"><p>BBQTemp by M.Pitk√§nen 2013</p>
                <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a></p>
            </div>
        </div>


        <script src="js/jquery.js"></script>
        <script src="js/bootstrap/js/bootstrap.min.js"></script>
        <script class="include" type="text/javascript" src="js/jquery.jqplot.min.js"></script>
        <script class="include" language="javascript" type="text/javascript" src="js/jqplot.dateAxisRenderer.min.js"></script>
        <script class="code" type="text/javascript">

            $(document).ready(function(){

                var ajaxUrlCurrent = "../BBQTemp?json=getXhourlyData&hours=1";
            
                function updateGraph(ajaxUrl, title) {
                    ajaxUrlCurrent = ajaxUrl;
                    
                    $.ajax({
                        async: false,
                        url: ajaxUrl,
                        dataType:"json",
                        success: function(data) {
                            drawGraph(data, title);
                        }
                    }
                )};
                    
                function drawGraph(data, title) {
                    $('#chart').html("");
                    $.jqplot(
                    'chart',
                    [data[0].data],
                    {
                        title:title,
                        axes:{
                            xaxis:{
                                renderer:$.jqplot.DateAxisRenderer,
                                tickOptions:{formatString:'%H:%M'},
                                tickInterval:120000
                            }
                        },
                        grid: {
       
                            background: '#ffffff'      // grid background
        
                        },

                        series:[{
                                lineWidth:1,
                                markerOptions:{style:'circle',size:5},
                                rendererOptions: {
                                    smooth: true
                                }
                            }]
                        
                    }
                )};

                $("#button24hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=24";
                    updateGraph(ajaxUrl,"Last 24 hour temperatures");
                    return false;
                });
                        
                $("#button1hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=1";
                    updateGraph(ajaxUrl,"Last 60 minutes temperatures");

                    return false;
                });
                $("#button2hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=2";
                    updateGraph(ajaxUrl,"Last 2 hour temperatures");

                    return false;
                });
                $("#button4hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=4";
                    updateGraph(ajaxUrl,"Last 4 hour temperatures");

                    return false;
                });
                $("#button8hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=8";
                    updateGraph(ajaxUrl,"Last 8 hour temperatures");

                    return false;
                });
                $("#button12hData").on("click", function() {
                    var ajaxUrl = "../BBQTemp?json=getXhourlyData&hours=12";
                    updateGraph(ajaxUrl,"Last 12 hour temperatures");

                    return false;
                });
       
                $("#buttonRefresh").on("click", function() {
                    updateGraph(ajaxUrlCurrent,"Refreshed data...");
                    return false;
                });
            
                /*
                        $.getJSON(ajaxUrl,function (data) {
                            plot1 = $.jqplot('chart', [data[0].data], {
                                title:'Last 60 minutes temperatures',
                                axes:{
                                    xaxis:{
                                        renderer:$.jqplot.DateAxisRenderer,
                                        tickOptions:{formatString:'%H:%M'},
                                        tickInterval:120000
                                    }
                                },
                                grid: {
       
                                    background: '#ffffff'      // grid background
        
                                },

                                series:[{
                                        lineWidth:1,
                                        markerOptions:{style:'circle',size:5},
                                        rendererOptions: {
                                            smooth: true
                                        }
                                    }]
                            });
                        });
                    
                 
                 *       */
                updateGraph(ajaxUrlCurrent, "Last 60 minutes temperatures");
            });
        </script>
    </body>
</html>
